<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
</head>

<body>
    <h1>User Management</h1>

    <table border="1">
        <tr>
            <th>Name</th>
            <th>City</th>
            <th>Country</th>
            <th>Blocked</th>
            <th>Action</th>
        </tr>
        <% users.forEach(user=> { %>
            <tr>
                <td>
                    <%= user.name %>
                </td>
                <td>
                    <%= user.city %>
                </td>
                <td>
                    <%= user.country %>
                </td>
                <td>
                    <%= user.block ? 'Yes' : 'No' %>
                </td>
                <td>
                    <form action="/admin/block-user" method="post">
                        <input type="hidden" name="userId" value="<%= user._id %>">
                        <select name="block">
                            <option value="true" <% if (user.block) { %> selected <% } %>>Block</option>
                            <option value="false" <% if (!user.block) { %> selected <% } %>>Unblock</option>
                        </select>
                        <button type="submit">Update</button>
                    </form>
                </td>
            </tr>
            <% }); %>
    </table>

    <h2>Delete User</h2>
    <form action="/admin/delete-user" method="post">
        <label for="userId">Select User:</label>
        <select name="userId">
            <% users.forEach(user=> { %>
                <option value="<%= user._id %>">
                    <%= user.name %> - <%= user.city %>, <%= user.country %>
                </option>
                <% }); %>
        </select>
        <button type="submit">Delete</button>
    </form>
</body>

</html>